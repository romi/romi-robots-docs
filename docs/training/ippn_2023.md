# Workshop IPPN Anger 2023

## Talk
_By Fabrice Besnard._

## Demonstration
_By Peter Hanappe._

## Hands-on session
_By Jonathan Legrand._

### Getting started

#### Install Docker Engine
If it's not done already, you need to **install the Docker Engine** on your machine.

Follow the official instructions here: [Install Docker Engine](https://docs.docker.com/engine/install/).

#### Pull the Docker image
We made a specific Docker image for this workshop shipping an example dataset and notebooks.

To pull this image, from our [DockerHub](https://hub.docker.com/u/roboticsmicrofarms):
```shell
docker pull roboticsmicrofarms/plant-3d-vision:ippn
```

### Start a container
To start a container based on this `roboticsmicrofarms/plant-3d-vision:ippn` image:
```shell
docker run --rm --gpus all -p 8888:8888 roboticsmicrofarms/plant-3d-vision:ippn
```

This should start a container and jupyter notebook.

!!! note
- `--rm` automatically remove the container when it exits
- `-gpus all` add all GPU devices to the container
- `-p 8888:8888` bing your port 8888 to the container port 8888

### Connect to the notebook
Following the previous `docker run` command, a series of messages should appear in the terminal.
They are emitted by jupyter notebook, and they should give you something like:

```shell
    To access the notebook, open this file in a browser:
        file:///home/myuser/.local/share/jupyter/runtime/nbserver-1-open.html
    Or copy and paste one of these URLs:
        http://fdc0ad0ca87d:8888/?token=0598c4791146a98cf9b0c9344c32a7df15e703af79415ea7
     or http://127.0.0.1:8888/?token=0598c4791146a98cf9b0c9344c32a7df15e703af79415ea7
```

You may click or copy/paste the URL starting with `127.0.0.1:8888` in your favorite browser.
This should take you to the landing page of jupyter notebook.

You should see something like this:
![jupyter notebook index](jupyter_nb_index.png)

### Run a notebook
To start playing around with our notebooks, move to the `notebooks` folder, then select the notebook you want to use.

### FYI
Here are a few facts about this Docker image:

- The `plant-3d-vision` sources can be found under `$HOME/plant-3d-vision`.
- The database can be found under `/myapp/db`, this path is saved to the `DB_LOCATION` environment variable.
- The shared database has been acquired using our _Plant Imager v2_ with a Sony RX-0 camera (more
  info [here](../plant_imager/build_v2/index.md)).
- If you perform a reconstruction using the task `Colmap` it will use another Docker image
  named `roboticsmicrofarms/colmap`.
